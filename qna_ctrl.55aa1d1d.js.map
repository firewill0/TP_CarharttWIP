{"version":3,"sources":["js/qna_ctrl.js"],"names":["qna_list","document","querySelector","qna_detail","querySelectorAll","qna_status","btn_qnaList","qna_write_box","btn_qnaOk","btn_qnaCancel","qna_name_id","qna_text_title_id","qna_text_id","qna_lock_id","qna_counter","qna_answer_box","qna_answer_text_id","btn_qna_answerOk","btn_qna_answerCancel","RIDCheck","id","data","length","result","slice","prefix","i","addQnAAnswer","ele","addEventListener","console","log","classList","contains","style","display","addQnAReply","El_get","getElRe","getElementById","answer_text","value","innerHTML","reply_box","createElement","setAttribute","reply_status","reply_answer","reply_who","reply_text","appendChild","add","remove","getRID","getQnAText","getQnATitle","nowDate","Date","DateString","getFullYear","getMonth","getDate","newQnA","newQnACat","newQnACatTextNode","createTextNode","qna_text_box","qna_lock","checked","newQnAText","newQnATextNode","newQnATitle","newQnATitleNode","lock_icon","newQnADate","newQnADateNode","newRID","newRIDNode","newDelete","parent","parentNode","getQnAID","getAttribute","removeChild","newReply","qna_list_child","children","newQnA_ID","Math","floor","random","forEach","element","element_close"],"mappings":"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","file":"qna_ctrl.55aa1d1d.js","sourceRoot":"..","sourcesContent":["const qna_list = document.querySelector('.qna_list');\r\nconst qna_detail = document.querySelectorAll('.qna_detail');\r\nconst qna_status = document.querySelector('.qna_status');\r\nconst btn_qnaList = document.querySelector('.btn_qnaList');\r\nconst qna_write_box = document.querySelector('.qna_write_box');\r\nconst btn_qnaOk = document.querySelector('.btn_qnaOk');\r\nconst btn_qnaCancel = document.querySelector('.btn_qnaCancel');\r\nconst qna_name_id = document.querySelector('#qna_name_id');\r\nconst qna_text_title_id = document.querySelector('#qna_text_title_id');\r\nconst qna_text_id = document.querySelector('#qna_text_id');\r\nconst qna_lock_id = document.querySelector('#qna_lock_id');\r\nconst qna_counter = document.querySelector('.qna_counter');\r\nconst qna_answer_box = document.querySelector('.qna_answer_box');\r\nconst qna_answer_text_id = document.querySelector('#qna_answer_text_id');\r\nconst btn_qna_answerOk = document.querySelector('.btn_qna_answerOk');\r\nconst btn_qna_answerCancel = document.querySelector('.btn_qna_answerCancel');\r\n\r\nqna_counter.innerHTML = qna_detail.length;\r\n\r\nbtn_qnaList.addEventListener('click', function () {\r\n    qna_write_box.style.display = \"block\";\r\n});\r\n\r\nbtn_qnaCancel.addEventListener('click', function () {\r\n    qna_write_box.style.display = \"none\";\r\n});\r\n\r\nfunction RIDCheck(id) {\r\n    let data = \"\";\r\n    if (id.length >= 6) {\r\n        let result = id.slice(0, 6);\r\n        let prefix = id.slice(0, 2);\r\n        for (let i = 0; i < result.length; i++) {\r\n            if (i >= 2) {\r\n                prefix += \"*\";\r\n            };\r\n        };\r\n        data = prefix;\r\n    } else {\r\n        let prefix = id.slice(0, 2);\r\n        for (let i = 0; i < id.length; i++) {\r\n            if (i >= 2) {\r\n                prefix += \"*\";\r\n            };\r\n        };\r\n        data = prefix;\r\n    };\r\n\r\n    return data;\r\n}\r\n\r\nbtn_qnaOk.addEventListener('click', function () {\r\n    let getRID = qna_name_id.value;\r\n\r\n    let getQnAText = qna_text_id.value;\r\n    let getQnATitle = qna_text_title_id.value;\r\n\r\n    let result = RIDCheck(getRID);\r\n\r\n    let nowDate = new Date();\r\n    let DateString = nowDate.getFullYear() + '-' + (nowDate.getMonth() + 1) + '-' + nowDate.getDate();\r\n\r\n    console.log(result);\r\n\r\n    let newQnA = document.createElement('li');\r\n    newQnA.setAttribute('class', 'qna_detail notanswer');\r\n\r\n    let newQnACat = document.createElement('p');\r\n    newQnACat.setAttribute('class', 'qna_status');\r\n    let newQnACatTextNode = document.createTextNode(\"미처리\");\r\n    newQnACat.appendChild(newQnACatTextNode);\r\n\r\n    let qna_text_box = document.createElement('div');\r\n    qna_text_box.setAttribute('class', 'qna_text_box');\r\n\r\n    let qna_lock = qna_lock_id.checked;\r\n\r\n    let newQnAText = document.createElement('p');\r\n    newQnAText.setAttribute('class', 'qna_txt_detail')\r\n    let newQnATextNode = document.createTextNode(getQnAText);\r\n    newQnAText.appendChild(newQnATextNode);\r\n\r\n\r\n    let newQnATitle = document.createElement('p');\r\n    newQnATitle.setAttribute('class', 'qna_txt_title')\r\n    let newQnATitleNode = document.createTextNode(getQnATitle);\r\n    newQnATitle.appendChild(newQnATitleNode);\r\n\r\n    if (qna_lock === true) {\r\n        newQnAText.style.display = \"none\";\r\n        let lock_icon = document.createElement('i');\r\n        lock_icon.setAttribute('class', 'fas fa-lock');\r\n        newQnATitle.appendChild(lock_icon);\r\n        newQnA.classList.add(\"locked\");\r\n    } else {\r\n        newQnAText.style.display = \"block\";\r\n    }\r\n\r\n    qna_text_box.appendChild(newQnATitle);\r\n    qna_text_box.appendChild(newQnAText);\r\n\r\n\r\n    let newQnADate = document.createElement('p');\r\n    newQnADate.setAttribute('class', 'qna_date')\r\n    let newQnADateNode = document.createTextNode(DateString);\r\n    newQnADate.appendChild(newQnADateNode);\r\n\r\n    let newRID = document.createElement('p');\r\n    newRID.setAttribute('class', 'qna_id')\r\n    let newRIDNode = document.createTextNode(result);\r\n    newRID.appendChild(newRIDNode);\r\n\r\n    let newDelete = document.createElement('p');\r\n    newDelete.setAttribute('class', 'btnQnADelete');\r\n    newDelete.innerHTML = `<i class=\"fas fa-backspace\"></i>`;\r\n\r\n    newDelete.addEventListener('click', function () {\r\n        let parent = newDelete.parentNode;\r\n\r\n        let getQnAID = parent.getAttribute('id');\r\n        console.log(parent, getQnAID);\r\n\r\n        qna_list.removeChild(document.getElementById(getQnAID));\r\n        qna_answer_box.style.display = \"none\";\r\n    });\r\n\r\n    let newReply = document.createElement('p');\r\n    newReply.setAttribute('class', 'btnQnAReply');\r\n    newReply.innerHTML = `<i class=\"far fa-comment-dots\"></i>`;\r\n\r\n    newReply.addEventListener('click', function () {\r\n        let parent = this.parentNode;\r\n        console.log(\"parent node:\", parent);\r\n\r\n        let getQnAID = parent.getAttribute('id');\r\n        console.log(parent, getQnAID);\r\n        qna_answer_box.style.display = \"block\";\r\n        addQnAReply(getQnAID);\r\n    });\r\n\r\n\r\n    newQnA.appendChild(newQnACat);\r\n    newQnA.appendChild(qna_text_box);\r\n    newQnA.appendChild(newQnADate);\r\n    newQnA.appendChild(newRID);\r\n    newQnA.appendChild(newDelete);\r\n    newQnA.appendChild(newReply);\r\n\r\n    qna_list.appendChild(newQnA);\r\n\r\n    let qna_list_child = qna_list.children.length;\r\n    console.log(qna_list_child);\r\n    qna_counter.innerHTML = qna_list_child;\r\n    let newQnA_ID = \"newQnAID\" + qna_list_child + \"_\" + Math.floor(Math.random() * 1000);\r\n    newQnA.setAttribute('id', newQnA_ID);\r\n\r\n    qna_write_box.style.display = \"none\";\r\n\r\n    qna_name_id.value = '';\r\n    qna_text_title_id.value = '';\r\n    qna_text_title_id.value = '';\r\n    qna_text_id.value = '';\r\n    qna_lock_id.checked = false;\r\n\r\n    const qna_detail_new = document.querySelectorAll('.qna_detail');\r\n\r\n    qna_detail_new.forEach((element) => {\r\n        addQnAAnswer(element);\r\n    });\r\n});\r\n\r\nfunction addQnAAnswer(ele) {\r\n    ele.addEventListener('click', function () {\r\n        console.log(ele);\r\n\r\n        if (ele.classList.contains(\"notanswer\")) {\r\n            console.log(\"not answered QnA\");\r\n            // qna_answer_box.style.display = \"block\";\r\n        }\r\n\r\n        if (ele.classList.contains(\"locked\")) {\r\n            const ele_qna_text_box = ele.querySelector('.qna_text_box');\r\n            const ele_qna_txt_detail = ele_qna_text_box.querySelector('.qna_txt_detail');\r\n\r\n            ele_qna_txt_detail.style.display = \"block\";\r\n        };\r\n\r\n    });\r\n\r\n}\r\n\r\nfunction addQnAReply(El_get) {\r\n    console.log(El_get);\r\n\r\n    let getElRe = document.getElementById(El_get);\r\n    console.log('getElRe', getElRe);\r\n\r\n    btn_qna_answerOk.addEventListener('click', function () {\r\n\r\n        if (!(getElRe.classList.contains('answered'))) {\r\n            let answer_text = qna_answer_text_id.value;\r\n            getElRe.querySelector('.qna_status').innerHTML = \"답변완료\";\r\n    \r\n            let reply_box = document.createElement('div');\r\n            reply_box.setAttribute('class', 'reply_box');\r\n    \r\n            let reply_status = document.createElement('p');\r\n            reply_status.innerHTML = \"답변\";\r\n            reply_status.setAttribute('class', 'reply_status');\r\n    \r\n            let reply_answer = document.createElement('div');\r\n            reply_answer.setAttribute('class', 'reply_answer');\r\n    \r\n            let reply_who = document.createElement('p');\r\n            reply_who.innerHTML = `<i class='fas fa-reply fa-rotate-180'></i>[CARHARTT] 관리자`;\r\n            reply_who.setAttribute('class', 'reply_who');\r\n    \r\n            let reply_text = document.createElement('p');\r\n            reply_text.innerHTML = answer_text;\r\n            reply_text.setAttribute('class', 'reply_text');\r\n    \r\n            reply_answer.appendChild(reply_who);\r\n            reply_answer.appendChild(reply_text);\r\n    \r\n            reply_box.appendChild(reply_status);\r\n            reply_box.appendChild(reply_answer);\r\n    \r\n            getElRe.appendChild(reply_box);\r\n    \r\n            qna_answer_box.style.display = \"none\";\r\n\r\n            getElRe.classList.add('answered');\r\n            getElRe.classList.remove('notanswer');\r\n    \r\n            // qna_answer_text_id.value = \"\";\r\n        };\r\n\r\n        \r\n    });\r\n}\r\n\r\nbtn_qna_answerCancel.addEventListener('click', function () {\r\n    qna_answer_box.style.display = \"none\";\r\n\r\n    const qna_detail_close = document.querySelectorAll('.qna_detail');\r\n\r\n    qna_detail_close.forEach((element_close) => {\r\n        if (element_close.classList.contains(\"locked\")) {\r\n            const ele_qna_text_box = element_close.querySelector('.qna_text_box');\r\n            const ele_qna_txt_detail = ele_qna_text_box.querySelector('.qna_txt_detail');\r\n\r\n            ele_qna_txt_detail.style.display = \"none\";\r\n        };\r\n    });\r\n});"]}