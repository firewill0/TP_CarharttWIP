{"version":3,"sources":["js/qna_ctrl.js"],"names":["qna_list","document","querySelector","qna_detail","querySelectorAll","qna_status","btn_qnaList","qna_write_box","btn_qnaOk","btn_qnaCancel","qna_name_id","qna_text_title_id","qna_text_id","qna_lock_id","qna_counter","qna_answer_box","qna_answer_text_id","btn_qna_answerOk","btn_qna_answerCancel","RIDCheck","id","data","length","result","slice","prefix","i","addQnAAnswer","ele","addEventListener","console","log","classList","contains","style","display","addQnAReply","El_get","answer_text","value","innerHTML","reply_box","createElement","setAttribute","reply_status","reply_answer","reply_who","reply_text","appendChild","getRID","getQnAText","getQnATitle","nowDate","Date","DateString","getFullYear","getMonth","getDate","newQnA","newQnACat","newQnACatTextNode","createTextNode","qna_text_box","qna_lock","checked","newQnAText","newQnATextNode","newQnATitle","newQnATitleNode","lock_icon","add","newQnADate","newQnADateNode","newRID","newRIDNode","newDelete","parent","parentNode","getQnAID","getAttribute","removeChild","getElementById","newReply","qna_list_child","children","newQnA_ID","forEach","element","element_close"],"mappings":"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","file":"qna_ctrl.55aa1d1d.js","sourceRoot":"..","sourcesContent":["const qna_list = document.querySelector('.qna_list');\r\nconst qna_detail = document.querySelectorAll('.qna_detail');\r\nconst qna_status = document.querySelector('.qna_status');\r\nconst btn_qnaList = document.querySelector('.btn_qnaList');\r\nconst qna_write_box = document.querySelector('.qna_write_box');\r\nconst btn_qnaOk = document.querySelector('.btn_qnaOk');\r\nconst btn_qnaCancel = document.querySelector('.btn_qnaCancel');\r\nconst qna_name_id = document.querySelector('#qna_name_id');\r\nconst qna_text_title_id = document.querySelector('#qna_text_title_id');\r\nconst qna_text_id = document.querySelector('#qna_text_id');\r\nconst qna_lock_id = document.querySelector('#qna_lock_id');\r\nconst qna_counter = document.querySelector('.qna_counter');\r\nconst qna_answer_box = document.querySelector('.qna_answer_box');\r\nconst qna_answer_text_id = document.querySelector('#qna_answer_text_id');\r\nconst btn_qna_answerOk = document.querySelector('.btn_qna_answerOk');\r\nconst btn_qna_answerCancel = document.querySelector('.btn_qna_answerCancel');\r\n\r\nqna_counter.innerHTML = qna_detail.length;\r\n\r\nbtn_qnaList.addEventListener('click', function () {\r\n    qna_write_box.style.display = \"block\";\r\n});\r\n\r\nbtn_qnaCancel.addEventListener('click', function () {\r\n    qna_write_box.style.display = \"none\";\r\n});\r\n\r\nfunction RIDCheck(id) {\r\n    let data = \"\";\r\n    if (id.length >= 6) {\r\n        let result = id.slice(0, 6);\r\n        let prefix = id.slice(0, 2);\r\n        for (let i = 0; i < result.length; i++) {\r\n            if (i >= 2) {\r\n                prefix += \"*\";\r\n            };\r\n        };\r\n        data = prefix;\r\n    } else {\r\n        let prefix = id.slice(0, 2);\r\n        for (let i = 0; i < id.length; i++) {\r\n            if (i >= 2) {\r\n                prefix += \"*\";\r\n            };\r\n        };\r\n        data = prefix;\r\n    };\r\n\r\n    return data;\r\n}\r\n\r\nbtn_qnaOk.addEventListener('click', function () {\r\n    let getRID = qna_name_id.value;\r\n\r\n    let getQnAText = qna_text_id.value;\r\n    let getQnATitle = qna_text_title_id.value;\r\n\r\n    let result = RIDCheck(getRID);\r\n\r\n    let nowDate = new Date();\r\n    let DateString = nowDate.getFullYear() + '-' + (nowDate.getMonth() + 1) + '-' + nowDate.getDate();\r\n\r\n    console.log(result);\r\n\r\n    let newQnA = document.createElement('li');\r\n    newQnA.setAttribute('class', 'qna_detail notanswer');\r\n\r\n    let newQnACat = document.createElement('p');\r\n    newQnACat.setAttribute('class', 'qna_status');\r\n    let newQnACatTextNode = document.createTextNode(\"미처리\");\r\n    newQnACat.appendChild(newQnACatTextNode);\r\n\r\n    let qna_text_box = document.createElement('div');\r\n    qna_text_box.setAttribute('class', 'qna_text_box');\r\n\r\n    let qna_lock = qna_lock_id.checked;\r\n\r\n    let newQnAText = document.createElement('p');\r\n    newQnAText.setAttribute('class', 'qna_txt_detail')\r\n    let newQnATextNode = document.createTextNode(getQnAText);\r\n    newQnAText.appendChild(newQnATextNode);\r\n\r\n\r\n    let newQnATitle = document.createElement('p');\r\n    newQnATitle.setAttribute('class', 'qna_txt_title')\r\n    let newQnATitleNode = document.createTextNode(getQnATitle);\r\n    newQnATitle.appendChild(newQnATitleNode);\r\n\r\n    if (qna_lock === true) {\r\n        newQnAText.style.display = \"none\";\r\n        let lock_icon = document.createElement('i');\r\n        lock_icon.setAttribute('class', 'fas fa-lock');\r\n        newQnATitle.appendChild(lock_icon);\r\n        newQnA.classList.add(\"locked\");\r\n    } else {\r\n        newQnAText.style.display = \"block\";\r\n    }\r\n\r\n    qna_text_box.appendChild(newQnATitle);\r\n    qna_text_box.appendChild(newQnAText);\r\n\r\n\r\n    let newQnADate = document.createElement('p');\r\n    newQnADate.setAttribute('class', 'qna_date')\r\n    let newQnADateNode = document.createTextNode(DateString);\r\n    newQnADate.appendChild(newQnADateNode);\r\n\r\n    let newRID = document.createElement('p');\r\n    newRID.setAttribute('class', 'qna_id')\r\n    let newRIDNode = document.createTextNode(result);\r\n    newRID.appendChild(newRIDNode);\r\n\r\n    let newDelete = document.createElement('p');\r\n    newDelete.setAttribute('class', 'btnQnADelete');\r\n    newDelete.innerHTML = `<i class=\"fas fa-backspace\"></i>`;\r\n\r\n    newDelete.addEventListener('click', function () {\r\n        let parent = newDelete.parentNode;\r\n\r\n        let getQnAID = parent.getAttribute('id');\r\n        console.log(parent, getQnAID);\r\n\r\n        qna_list.removeChild(document.getElementById(getQnAID));\r\n        qna_answer_box.style.display = \"none\";\r\n    });\r\n\r\n    let newReply = document.createElement('p');\r\n    newReply.setAttribute('class', 'btnQnAReply');\r\n    newReply.innerHTML = `<i class=\"far fa-comment-dots\"></i>`;\r\n\r\n    newReply.addEventListener('click', function () {\r\n        let parent = newReply.parentNode;\r\n\r\n        let getQnAID = parent.getAttribute('id');\r\n        console.log(parent, getQnAID);\r\n        qna_answer_box.style.display = \"block\";\r\n        addQnAReply(parent);\r\n    });\r\n\r\n\r\n    newQnA.appendChild(newQnACat);\r\n    newQnA.appendChild(qna_text_box);\r\n    newQnA.appendChild(newQnADate);\r\n    newQnA.appendChild(newRID);\r\n    newQnA.appendChild(newDelete);\r\n    newQnA.appendChild(newReply);\r\n\r\n    qna_list.appendChild(newQnA);\r\n\r\n    let qna_list_child = qna_list.children.length;\r\n    console.log(qna_list_child);\r\n    qna_counter.innerHTML = qna_list_child;\r\n    let newQnA_ID = \"newQnAID\" + qna_list_child\r\n    newQnA.setAttribute('id', newQnA_ID);\r\n\r\n    qna_write_box.style.display = \"none\";\r\n\r\n    qna_name_id.value = '';\r\n    qna_text_title_id.value = '';\r\n    qna_text_title_id.value = '';\r\n    qna_text_id.value = '';\r\n    qna_lock_id.checked = false;\r\n\r\n    const qna_detail_new = document.querySelectorAll('.qna_detail');\r\n\r\n    qna_detail_new.forEach((element) => {\r\n        addQnAAnswer(element);\r\n    });\r\n});\r\n\r\nfunction addQnAAnswer(ele) {\r\n    ele.addEventListener('click', function () {\r\n        console.log(ele);\r\n\r\n        if (ele.classList.contains(\"notanswer\")) {\r\n            console.log(\"not answered QnA\");\r\n            // qna_answer_box.style.display = \"block\";\r\n        }\r\n\r\n        if (ele.classList.contains(\"locked\")) {\r\n            const ele_qna_text_box = ele.querySelector('.qna_text_box');\r\n            const ele_qna_txt_detail = ele_qna_text_box.querySelector('.qna_txt_detail');\r\n\r\n            ele_qna_txt_detail.style.display = \"block\";\r\n        };\r\n\r\n    });\r\n\r\n}\r\n\r\nfunction addQnAReply(El_get) {\r\n    btn_qna_answerOk.addEventListener('click', function () {\r\n        console.log(El_get);\r\n        let answer_text = qna_answer_text_id.value;\r\n        El_get.querySelector('.qna_status').innerHTML = \"답변완료\";\r\n\r\n        let reply_box = document.createElement('div');\r\n        reply_box.setAttribute('class', 'reply_box');\r\n\r\n        let reply_status = document.createElement('p');\r\n        reply_status.innerHTML = \"답변\";\r\n        reply_status.setAttribute('class', 'reply_status');\r\n\r\n        let reply_answer = document.createElement('div');\r\n        reply_answer.setAttribute('class', 'reply_answer');\r\n\r\n        let reply_who = document.createElement('p');\r\n        reply_who.innerHTML = `<i class='fas fa-reply fa-rotate-180'></i>[CARHARTT] 관리자`;\r\n        reply_who.setAttribute('class', 'reply_who');\r\n\r\n        let reply_text = document.createElement('p');\r\n        reply_text.innerHTML = answer_text;\r\n        reply_text.setAttribute('class', 'reply_text');\r\n\r\n        reply_answer.appendChild(reply_who);\r\n        reply_answer.appendChild(reply_text);\r\n\r\n        reply_box.appendChild(reply_status);\r\n        reply_box.appendChild(reply_answer);\r\n\r\n        El_get.appendChild(reply_box);\r\n\r\n        qna_answer_box.style.display = \"none\";\r\n\r\n        qna_answer_text_id.value = \"\";\r\n    });\r\n}\r\n\r\nbtn_qna_answerCancel.addEventListener('click', function () {\r\n    qna_answer_box.style.display = \"none\";\r\n\r\n    const qna_detail_close = document.querySelectorAll('.qna_detail');\r\n\r\n    qna_detail_close.forEach((element_close) => {\r\n        if (element_close.classList.contains(\"locked\")) {\r\n            const ele_qna_text_box = element_close.querySelector('.qna_text_box');\r\n            const ele_qna_txt_detail = ele_qna_text_box.querySelector('.qna_txt_detail');\r\n\r\n            ele_qna_txt_detail.style.display = \"none\";\r\n        };\r\n    });\r\n});"]}